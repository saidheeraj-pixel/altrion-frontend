import{j as e,m as a}from"./animations-DMW0BnLD.js";import{u as v,c as f,r as y}from"./vendor-CInILLWq.js";import{g,R as m,h as _,T as k,B as h}from"./index-DmE6YkWe.js";import{C as c}from"./Card-BnPWI7R3.js";import{H as A,C,I as i,f as r}from"./formatters-DUDAB8vu.js";import"./chart-objC2bqF.js";import{W as L}from"./wallet-DhGEl6IA.js";import{S as R}from"./shield-BP-rCqRT.js";import{A as T}from"./arrow-left-8h1TeAST.js";import{A as w}from"./arrow-right-B-P9p7S_.js";import"./state-1cba2Yyk.js";import"./ThemeToggle-D8B3NSea.js";import"./useAuth-DwNt2FxU.js";const I={chase:"Chase",bofa:"Bank of America"};function W(){const n=v(),p=f(),u=g(t=>t.addApplication),x=p.state;if(y.useEffect(()=>{x||n(m.LOAN_APPLICATION)},[x,n]),!x)return null;const{loanResponse:d,selectedAssets:o,loanRequest:l}=x,s=d?.summary,j=()=>{const t=u({totalCollateral:s?.total_collateral??0,loanAmount:s?.total_loan??0,interestRate:s?.interest_rate??0,ltv:s?.portfolio_ltv??0,selectedAssets:o});n(m.LOAN_CONFIRMATION,{state:{loanResponse:d,selectedAssets:o,applicationId:t}})},b=()=>{n(m.LOAN_REVIEW,{state:{loanRequest:{assets:d.assets.map(t=>({symbol:t.symbol,collateral_value:t.collateral_usd})),months:l.months,payout_currency:l.payout_currency,bank:l.bank},selectedAssets:o,totalCollateral:s.total_collateral}})};return e.jsxs("div",{className:"min-h-screen bg-dark-bg relative",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-altrion-500/10 rounded-full blur-[120px] animate-pulse",style:{animationDuration:"8s"}}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-accent-cyan/5 rounded-full blur-[120px] animate-pulse",style:{animationDuration:"10s"}})]}),e.jsx(A,{}),e.jsx("main",{className:"max-w-4xl mx-auto px-5 py-8",children:e.jsxs(a.div,{variants:C,initial:"hidden",animate:"visible",className:"space-y-6",children:[e.jsxs(a.div,{variants:i,className:"text-center",children:[e.jsx(a.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15,delay:.2},className:"w-16 h-16 mx-auto mb-4 rounded-full bg-blue-500/20 flex items-center justify-center",children:e.jsx(_,{size:36,className:"text-blue-400"})}),e.jsx("h1",{className:"font-display text-3xl font-bold text-text-primary mb-2",children:"Review Your Loan Terms"}),e.jsx("p",{className:"text-text-secondary",children:"Please review all loan details carefully before confirming your application."})]}),e.jsx(a.div,{variants:i,children:e.jsxs(c,{variant:"bordered",className:"border-altrion-500/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-altrion-500/20 flex items-center justify-center",children:e.jsx(L,{size:24,className:"text-altrion-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-2xl font-semibold text-text-primary",children:"Loan Summary"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Your approved loan details"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Total Collateral"}),e.jsx("p",{className:"text-2xl font-bold text-text-primary",children:r(s?.total_collateral??0)})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Loan Amount"}),e.jsx("p",{className:"text-2xl font-bold text-altrion-400",children:r(s?.total_loan??0)})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Interest Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:[(s?.interest_rate??0).toFixed(2),"% APR"]})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"LTV Ratio"}),e.jsxs("p",{className:"text-2xl font-bold text-text-primary",children:[(s?.portfolio_ltv??0).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Monthly Payment"}),e.jsx("p",{className:"text-xl font-bold text-altrion-400",children:r(s?.monthly_emi??0)})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Loan Term"}),e.jsxs("p",{className:"text-xl font-bold text-text-primary",children:[l?.months??12," months"]})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Margin Call LTV"}),e.jsxs("p",{className:"text-xl font-bold text-amber-400",children:[(s?.margin_call_ltv??0).toFixed(0),"%"]})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Liquidation LTV"}),e.jsxs("p",{className:"text-xl font-bold text-red-400",children:[(s?.liquidation_ltv??0).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Payout Currency"}),e.jsx("p",{className:"text-xl font-bold text-text-primary",children:l?.payout_currency??"USD"})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Bank Account"}),e.jsx("p",{className:"text-xl font-bold text-text-primary",children:I[l?.bank??"chase"]||l?.bank||"Chase"})]})]})]})}),e.jsx(a.div,{variants:i,children:e.jsxs(c,{variant:"bordered",children:[e.jsx("h3",{className:"font-display text-lg font-semibold text-text-primary mb-4",children:"Collateral Asset Breakdown"}),e.jsx("div",{className:"space-y-4",children:(d?.assets??[]).map((t,N)=>e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-dark-card flex items-center justify-center font-bold text-sm",children:(t.symbol??"XX").slice(0,2)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-text-primary",children:t.symbol??"Unknown"}),e.jsx("p",{className:"text-text-muted text-sm",children:t.tier??"Tier 1"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-text-muted text-xs",children:"Monthly Payment"}),e.jsx("p",{className:"text-xl font-bold text-altrion-400",children:r(d?.schedule?.payments?.[t.symbol]??0)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Collateral"}),e.jsx("p",{className:"font-semibold text-text-primary",children:r(t.collateral_usd??0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Loan Amount"}),e.jsx("p",{className:"font-semibold text-altrion-400",children:r(t.loan_usd??0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"LTV"}),e.jsxs("p",{className:"font-semibold text-text-primary",children:[((t.ltv??0)*100).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Interest Rate"}),e.jsxs("p",{className:"font-semibold text-yellow-400",children:[((t.interest_rate??0)*100).toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mt-3 pt-3 border-t border-dark-border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Base Rate"}),e.jsxs("p",{className:"font-semibold text-text-secondary",children:[((t.base_rate??0)*100).toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Risk Premium"}),e.jsxs("p",{className:"font-semibold text-red-400",children:[((t.risk_premium??0)*100).toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Volatility Premium"}),e.jsxs("p",{className:"font-semibold text-amber-400",children:[((t.volatility_premium??0)*100).toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"30-day Change"}),e.jsxs("p",{className:`font-semibold ${(t.pct_change_30d??0)>=0?"text-green-400":"text-red-400"}`,children:[(t.pct_change_30d??0)>=0?"+":"",(t.pct_change_30d??0).toFixed(2),"%"]})]})]})]},N))})]})}),e.jsx(a.div,{variants:i,children:e.jsx(c,{variant:"bordered",className:"bg-amber-500/5 border-amber-500/30",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(k,{size:24,className:"text-amber-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-text-primary mb-2",children:"Important Risk Information"}),e.jsxs("ul",{className:"text-sm text-text-secondary space-y-2",children:[e.jsxs("li",{children:[e.jsxs("strong",{className:"text-amber-400",children:["Margin Call at ",(s?.margin_call_ltv??0).toFixed(0),"% LTV:"]})," If your collateral value drops, you may need to add more collateral or reduce your loan."]}),e.jsxs("li",{children:[e.jsxs("strong",{className:"text-red-400",children:["Liquidation at ",(s?.liquidation_ltv??0).toFixed(0),"% LTV:"]})," Your collateral may be liquidated if LTV exceeds this threshold."]}),e.jsx("li",{children:"Interest rates are variable and may change based on market conditions."})]})]})]})})}),e.jsx(a.div,{variants:i,children:e.jsx(c,{variant:"bordered",className:"bg-dark-elevated/50",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{size:20,className:"text-altrion-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-text-primary mb-1",children:"Terms & Conditions"}),e.jsx("p",{className:"text-sm text-text-secondary",children:'By clicking "Confirm & Submit", you agree to our loan terms and conditions. Your selected assets will be locked as collateral until the loan is fully repaid. You understand the risks associated with cryptocurrency-backed loans including potential liquidation.'})]})]})})}),e.jsxs(a.div,{variants:i,className:"flex gap-4 justify-center pt-4",children:[e.jsxs(h,{variant:"secondary",onClick:b,children:[e.jsx(T,{size:16}),"Go Back"]}),e.jsxs(h,{onClick:j,children:["Confirm & Submit",e.jsx(w,{size:16})]})]})]})})]})}export{W as LoanSummary};
