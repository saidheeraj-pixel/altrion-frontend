import{j as e,m as l}from"./animations-DMW0BnLD.js";import{u as M,c as z,r as k}from"./vendor-CInILLWq.js";import{c as V,R as _,h as v,B as C,H as P}from"./index-DmE6YkWe.js";import{C as u}from"./Card-BnPWI7R3.js";import{H as B,C as E,I as i,f as a}from"./formatters-DUDAB8vu.js";import"./chart-objC2bqF.js";import{W as L}from"./wallet-DhGEl6IA.js";import{F as A}from"./file-text-D9pLg5BT.js";import{C as H}from"./clock-jBxLc4NQ.js";import{S as $}from"./shield-BP-rCqRT.js";import"./state-1cba2Yyk.js";import"./ThemeToggle-D8B3NSea.js";import"./useAuth-DwNt2FxU.js";const W=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],O=V("copy",W);function le(){const b=M(),T=z(),[w,y]=k.useState(!1),x=T.state,g=x?.applicationId||(()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let d="ALT-";for(let n=0;n<8;n++)d+=t.charAt(Math.floor(Math.random()*t.length));return d})(),F=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});k.useEffect(()=>{x||b(_.DASHBOARD)},[x,b]);const R=()=>{navigator.clipboard.writeText(g),y(!0),setTimeout(()=>y(!1),2e3)};if(!x)return null;const{loanResponse:j}=x,s=j.summary;return e.jsxs("div",{className:"min-h-screen bg-dark-bg relative",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-altrion-500/10 rounded-full blur-[120px] animate-pulse",style:{animationDuration:"8s"}}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-accent-cyan/5 rounded-full blur-[120px] animate-pulse",style:{animationDuration:"10s"}})]}),e.jsx(B,{}),e.jsx("main",{className:"max-w-4xl mx-auto px-5 pt-16 pb-16",children:e.jsxs(l.div,{variants:E,initial:"hidden",animate:"visible",className:"space-y-6",children:[e.jsxs(l.div,{variants:i,className:"text-center",children:[e.jsx(l.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15,delay:.2},className:"w-20 h-20 mx-auto mb-4 rounded-full bg-altrion-500/20 flex items-center justify-center",children:e.jsx(v,{size:48,className:"text-altrion-400"})}),e.jsx("h1",{className:"font-display text-3xl font-bold text-text-primary mb-2",children:"Application Submitted Successfully!"}),e.jsx("p",{className:"text-text-secondary",children:"Your loan application has been received and is being processed."})]}),e.jsx(l.div,{variants:i,children:e.jsxs(u,{variant:"bordered",className:"bg-gradient-to-br from-dark-card via-dark-elevated to-dark-card border-altrion-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-text-muted text-sm mb-1",children:"Application ID"}),e.jsx("p",{className:"text-2xl font-bold text-text-primary font-mono",children:g})]}),e.jsx(C,{variant:"secondary",size:"sm",onClick:R,children:w?e.jsxs(e.Fragment,{children:[e.jsx(v,{size:16}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{size:16}),"Copy ID"]})})]}),e.jsx("p",{className:"text-text-muted text-xs mt-3",children:"Save this ID for your records. You'll need it to track your application status."})]})}),e.jsx(l.div,{variants:i,children:e.jsxs(u,{variant:"bordered",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-altrion-500/20 flex items-center justify-center",children:e.jsx(L,{size:20,className:"text-altrion-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-xl font-semibold text-text-primary",children:"Loan Summary"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Your approved loan details"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Total Collateral"}),e.jsx("p",{className:"text-xl font-bold text-text-primary",children:a(s.total_collateral)})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Loan Amount"}),e.jsx("p",{className:"text-xl font-bold text-altrion-400",children:a(s.total_loan)})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Interest Rate"}),e.jsxs("p",{className:"text-xl font-bold text-text-primary",children:[s.interest_rate.toFixed(2),"% APR"]})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"LTV Ratio"}),e.jsxs("p",{className:"text-xl font-bold text-text-primary",children:[s.portfolio_ltv.toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Monthly Payment"}),e.jsx("p",{className:"text-xl font-bold text-accent-cyan",children:a(s.monthly_emi)})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Loan Term"}),e.jsxs("p",{className:"text-xl font-bold text-text-primary",children:[s.months," months"]})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Margin Call LTV"}),e.jsxs("p",{className:"text-xl font-bold text-amber-400",children:[s.margin_call_ltv.toFixed(0),"%"]})]}),e.jsxs("div",{className:"p-4 bg-dark-elevated rounded-xl",children:[e.jsx("p",{className:"text-text-muted text-xs mb-1",children:"Liquidation LTV"}),e.jsxs("p",{className:"text-xl font-bold text-red-400",children:[s.liquidation_ltv.toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"border-t border-dark-border pt-4 mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-text-secondary mb-3",children:"Collateral Asset Breakdown"}),e.jsx("div",{className:"space-y-2",children:j.assets.map((t,d)=>e.jsxs("div",{className:"p-3 bg-dark-elevated rounded-lg border border-dark-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-dark-card flex items-center justify-center font-bold text-sm",children:t.symbol.slice(0,2)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-text-primary text-sm",children:t.symbol}),e.jsx("p",{className:"text-xs text-text-muted",children:t.tier})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-text-muted",children:"Monthly Payment"}),e.jsx("p",{className:"text-base font-bold text-accent-cyan",children:a(j.schedule.payments[t.symbol])})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted",children:"Collateral"}),e.jsx("p",{className:"text-sm font-semibold text-text-primary",children:a(t.collateral_usd)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted",children:"Loan Amount"}),e.jsx("p",{className:"text-sm font-semibold text-altrion-400",children:a(t.loan_usd)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted",children:"LTV"}),e.jsxs("p",{className:"text-sm font-semibold text-text-primary",children:[(t.ltv*100).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted",children:"Interest Rate"}),e.jsxs("p",{className:"text-sm font-semibold text-text-primary",children:[(t.interest_rate*100).toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 pt-2 border-t border-dark-border/30",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted",children:"Base Rate"}),e.jsxs("p",{className:"text-xs font-medium text-text-primary",children:[(t.base_rate*100).toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted",children:"Risk Premium"}),e.jsxs("p",{className:"text-xs font-medium text-amber-400",children:[(t.risk_premium*100).toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted",children:"Volatility Premium"}),e.jsxs("p",{className:"text-xs font-medium text-red-400",children:[(t.volatility_premium*100).toFixed(2),"%"]})]}),t.pct_change_30d!==null&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted",children:"30-day Change"}),e.jsxs("p",{className:`text-xs font-medium ${t.pct_change_30d>=0?"text-green-400":"text-red-400"}`,children:[t.pct_change_30d>=0?"+":"",t.pct_change_30d.toFixed(2),"%"]})]})]})]},d))})]}),e.jsxs("div",{className:"border-t border-dark-border pt-4 mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-text-secondary mb-3",children:"Portfolio Payment Schedule"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-text-muted text-xs",children:[e.jsx("th",{className:"text-left py-2 px-3",children:"Month"}),e.jsx("th",{className:"text-right py-2 px-3",children:"Payment"}),e.jsx("th",{className:"text-right py-2 px-3",children:"Principal"}),e.jsx("th",{className:"text-right py-2 px-3",children:"Interest"}),e.jsx("th",{className:"text-right py-2 px-3",children:"Balance"})]})}),e.jsx("tbody",{children:j.schedule.portfolio.map(t=>e.jsxs("tr",{className:"border-t border-dark-border/50",children:[e.jsx("td",{className:"py-2 px-3 text-text-primary font-medium",children:t.month}),e.jsx("td",{className:"py-2 px-3 text-right text-text-primary",children:a(t.payment)}),e.jsx("td",{className:"py-2 px-3 text-right text-altrion-400",children:a(t.principal)}),e.jsx("td",{className:"py-2 px-3 text-right text-amber-400",children:a(t.interest)}),e.jsx("td",{className:"py-2 px-3 text-right text-text-muted",children:a(t.ending_balance)})]},t.month))})]})})]})]})}),s.analyst?.markdown&&e.jsx(l.div,{variants:i,children:e.jsxs(u,{variant:"bordered",className:"bg-gradient-to-br from-purple-500/5 to-blue-500/5 border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center",children:e.jsx(A,{size:24,className:"text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl font-bold text-text-primary",children:"Loan Analyst Summary"}),e.jsx("p",{className:"text-sm text-text-secondary",children:s.analyst.used_llm?`Generated by ${s.analyst.provider} (${s.analyst.model})`:"Deterministic analysis"})]})]}),e.jsx("div",{className:"space-y-6",children:s.analyst.markdown.replace(/^## /,"").split(`
## `).map((t,d)=>{if(!t.trim())return null;const n=t.split(`
`),S=n[0],D=n.slice(1);return e.jsxs("div",{className:"bg-dark-elevated/50 rounded-lg p-4 border border-dark-border/30",children:[e.jsx("h3",{className:"text-base font-bold text-text-primary mb-3 pb-2 border-b border-dark-border/50",children:S}),e.jsx("div",{className:"space-y-2",children:D.map((r,N)=>{if(r.startsWith("- ")){const c=r.substring(2),f=/\*\*(.+?)\*\*/g,m=/\[(.+?)\]\((.+?)\)/g;let o=c.replace(f,(h,p)=>`<strong class="text-text-primary font-semibold">${p}</strong>`);return o=o.replace(m,(h,p,I)=>`<a href="${I}" class="text-altrion-400 hover:text-altrion-300 underline" target="_blank" rel="noopener noreferrer">${p}</a>`),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsx("span",{className:"text-altrion-400 mt-0.5",children:"â€¢"}),e.jsx("span",{className:"flex-1 text-text-secondary leading-relaxed",dangerouslySetInnerHTML:{__html:o}})]},N)}if(r.startsWith("**")&&r.endsWith("**")){const c=r.replace(/\*\*/g,"");return e.jsx("h4",{className:"font-bold text-text-primary mt-4 mb-2 text-sm",children:c},N)}if(r.trim()){const c=/\*\*(.+?)\*\*/g,f=/\[(.+?)\]\((.+?)\)/g;let m=r.replace(c,(o,h)=>`<strong class="text-text-primary font-semibold">${h}</strong>`);return m=m.replace(f,(o,h,p)=>`<a href="${p}" class="text-altrion-400 hover:text-altrion-300 underline" target="_blank" rel="noopener noreferrer">${h}</a>`),e.jsx("p",{className:"text-sm text-text-secondary leading-relaxed",dangerouslySetInnerHTML:{__html:m}},N)}return null})})]},d)})}),e.jsxs("div",{className:"mt-6 p-5 bg-gradient-to-br from-altrion-500/10 to-blue-500/10 border border-altrion-500/30 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-4",children:"Final Loan Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Total Collateral Selected"}),e.jsx("p",{className:"text-lg font-bold text-text-primary",children:a(s.total_collateral)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Total Loan Amount"}),e.jsx("p",{className:"text-lg font-bold text-altrion-400",children:a(s.total_loan)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Portfolio LTV"}),e.jsxs("p",{className:"text-lg font-bold text-text-primary",children:[s.portfolio_ltv.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Liquidation LTV"}),e.jsxs("p",{className:"text-lg font-bold text-red-400",children:[s.liquidation_ltv.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Margin Call LTV"}),e.jsxs("p",{className:"text-lg font-bold text-amber-400",children:[s.margin_call_ltv.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Interest Rate"}),e.jsxs("p",{className:"text-lg font-bold text-text-primary",children:[s.interest_rate.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Loan Duration"}),e.jsxs("p",{className:"text-lg font-bold text-text-primary",children:[s.months," months"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Monthly Repayment (EMI)"}),e.jsx("p",{className:"text-lg font-bold text-accent-cyan",children:a(s.monthly_emi)})]})]})]})]})}),e.jsx(l.div,{variants:i,children:e.jsxs(u,{variant:"bordered",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-cyan/20 flex items-center justify-center",children:e.jsx(H,{size:20,className:"text-accent-cyan"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-xl font-semibold text-text-primary",children:"What's Next?"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Expected timeline for your application"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-altrion-500 flex items-center justify-center",children:e.jsx(v,{size:16,className:"text-white"})}),e.jsx("div",{className:"w-0.5 h-full bg-altrion-500 mt-2"})]}),e.jsxs("div",{className:"pb-6",children:[e.jsx("p",{className:"font-medium text-text-primary",children:"Application Submitted"}),e.jsx("p",{className:"text-sm text-text-muted",children:F})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-dark-elevated border-2 border-altrion-500 flex items-center justify-center",children:e.jsx($,{size:16,className:"text-altrion-400"})}),e.jsx("div",{className:"w-0.5 h-full bg-dark-border mt-2"})]}),e.jsxs("div",{className:"pb-6",children:[e.jsx("p",{className:"font-medium text-text-primary",children:"Collateral Verification"}),e.jsx("p",{className:"text-sm text-text-muted",children:"Usually within 24 hours"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-dark-elevated border-2 border-dark-border flex items-center justify-center",children:e.jsx(A,{size:16,className:"text-text-muted"})}),e.jsx("div",{className:"w-0.5 h-full bg-dark-border mt-2"})]}),e.jsxs("div",{className:"pb-6",children:[e.jsx("p",{className:"font-medium text-text-secondary",children:"Final Approval"}),e.jsx("p",{className:"text-sm text-text-muted",children:"1-2 business days"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-dark-elevated border-2 border-dark-border flex items-center justify-center",children:e.jsx(L,{size:16,className:"text-text-muted"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-text-secondary",children:"Funds Disbursement"}),e.jsx("p",{className:"text-sm text-text-muted",children:"Same day after approval"})]})]})]})]})}),e.jsx(l.div,{variants:i,className:"flex justify-center",children:e.jsxs(C,{onClick:()=>b(_.DASHBOARD),children:[e.jsx(P,{size:16}),"Back to Dashboard"]})}),e.jsx(l.div,{variants:i,className:"text-center",children:e.jsxs("p",{className:"text-text-muted text-sm",children:["Questions about your application? Contact our support team at"," ",e.jsx("a",{href:"mailto:support@altrion.com",className:"text-altrion-400 hover:underline",children:"support@altrion.com"})]})})]})})]})}export{le as LoanConfirmation};
